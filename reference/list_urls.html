<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>List data store servers and urls — list_download_urls • infx</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<meta property="og:title" content="List data store servers and urls — list_download_urls" />

<meta property="og:description" content="In order to download files from openBIS, download urls have to be generated
first, which can be done by calling list_download_urls(). This function
is used in fetch_files(), which iterates over the selected files, creating
download links and executing the downloads. All data store servers
registered to an openBIS instance are listed by list_datastores() and data
store server urls per data set can be queried by calling
list_datastore_urls()." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">infx</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/infx-intro.html">Introduction to infx</a>
    </li>
    <li>
      <a href="../articles/json-class.html">JSON object handling</a>
    </li>
    <li>
      <a href="../articles/openbis-api.html">OpenBIS API coverage</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>List data store servers and urls</h1>
    
    <div class="hidden name"><code>list_urls.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>In order to download files from openBIS, download urls have to be generated
first, which can be done by calling <code>list_download_urls()</code>. This function
is used in <code><a href='list_fetch_files.html'>fetch_files()</a></code>, which iterates over the selected files, creating
download links and executing the downloads. All data store servers
registered to an openBIS instance are listed by <code>list_datastores()</code> and data
store server urls per data set can be queried by calling
<code>list_datastore_urls()</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for character</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>path</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DataSet</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>path</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DatasetIdentifier</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>path</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='no'>...</span>)

<span class='co'># S3 method for DatasetReference</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>path</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='no'>...</span>)

<span class='co'># S3 method for FeatureVectorDatasetReference</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>path</span>,
  <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='no'>...</span>)

<span class='co'># S3 method for FeatureVectorDatasetWellReference</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>path</span>,
  <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='no'>...</span>)

<span class='co'># S3 method for ImageDatasetReference</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>path</span>,
  <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='no'>...</span>)

<span class='co'># S3 method for MicroscopyImageReference</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>path</span>,
  <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='no'>...</span>)

<span class='co'># S3 method for PlateImageReference</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>path</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='no'>...</span>)

<span class='co'># S3 method for DataSetFileDTO</span>
<span class='fu'>list_download_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='no'>...</span>)

<span class='fu'>list_datastores</span>(<span class='no'>token</span>, <span class='no'>...</span>)

<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for NULL</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for character</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DataSet</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DatasetIdentifier</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for DatasetReference</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for FeatureVectorDatasetReference</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for FeatureVectorDatasetWellReference</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for ImageDatasetReference</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for MicroscopyImageReference</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for PlateImageReference</span>
<span class='fu'>list_datastore_urls</span>(<span class='no'>token</span>, <span class='no'>x</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>token</th>
      <td><p>Login token as created by <code><a href='login.html'>login_openbis()</a></code>.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Object representing a (set of) dataset(s), e.g. a vector of dataset
codes, or a set of <code>DataSet</code>s or <code>DatasetIdentifier</code>s.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Generic compatibility. Extra arguments will be passed to
<code><a href='request.html'>make_requests()</a></code>.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>A character vector of file paths within datasets.</p></td>
    </tr>
    <tr>
      <th>timeout</th>
      <td><p>Time-span (in seconds) for which the file download link
should be valid.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>To specify files for which links are requested by <code>list_download_urls()</code>,
both a data set code and a file path are required. Objects, apart from
character vectors of data set codes, that may be passed to identify the
data set therefore include <code>DataSet</code>, <code>DatasetIdentifier</code>,
<code>DatasetReference</code>, <code>FeatureVectorDatasetReference</code>,
<code>FeatureVectorDatasetWellReference</code>, <code>ImageDatasetReference</code>,
<code>MicroscopyImageReference</code> and <code>PlateImageReference</code>. Additionally, dispatch
of <code>list_download_urls()</code> is possible on <code>DataSetFileDTO</code> objects which
contain both information on data set and file path of a file. A <code>timeout</code>
argument may be specified, determining how long (in seconds) the generated
url is valid for. If no specific timeout value is passed the url is valid
for what the openBIS documentation calls "a short time".</p>
<p><code>list_datastore_urls()</code> as <code>list_download_urls()</code> ultimately requires a
character vector of data set codes to make the API call and therefore
dispatch is possible on, in addition to character vector, <code>DataSet</code>,
<code>DatasetIdentifier</code>, <code>DatasetReference</code>, <code>FeatureVectorDatasetReference</code>,
<code>FeatureVectorDatasetWellReference</code>, <code>ImageDatasetReference</code>,
<code>MicroscopyImageReference</code> and <code>PlateImageReference</code> objects. Dispatch on
<code>NULL</code> requests the default data store server url. Data store sever url
related functionality is uninteresting for the InfectX set-up, as only a
single data store server exists, the url of which can be retrieved by a call
to <code>list_datastores()</code>.</p>
    
    <h2 class="hasAnchor" id="openbis"><a class="anchor" href="#openbis"></a>openBIS</h2>

    
    <ul>
<li><p><a href='https://svnsis.ethz.ch/doc/openbis/13.04.0/ch/systemsx/cisd/openbis/dss/generic/shared/api/v1/IDssServiceRpcGeneric.html'>IDssServiceRpcGeneric:getDownloadUrlForFileForDataSet</a></p></li>
<li><p><a href='https://svnsis.ethz.ch/doc/openbis/13.04.0/ch/systemsx/cisd/openbis/dss/generic/shared/api/v1/IDssServiceRpcGeneric.html'>IDssServiceRpcGeneric:getDownloadUrlForFileForDataSetWithTimeout</a></p></li>
</ul>
    <ul>
<li><p><a href='https://svnsis.ethz.ch/doc/openbis/13.04.0/ch/systemsx/cisd/openbis/generic/shared/api/v1/IGeneralInformationService.html'>IGeneralInformationService:listDataStores</a></p></li>
</ul>
    <ul>
<li><p><a href='https://svnsis.ethz.ch/doc/openbis/13.04.0/ch/systemsx/cisd/openbis/generic/shared/api/v1/IGeneralInformationService.html'>IGeneralInformationService:getDefaultPutDataStoreBaseURL</a></p></li>
<li><p><a href='https://svnsis.ethz.ch/doc/openbis/13.04.0/ch/systemsx/cisd/openbis/generic/shared/api/v1/IGeneralInformationService.html'>IGeneralInformationService:tryGetDataStoreBaseURL</a></p></li>
<li><p><a href='https://svnsis.ethz.ch/doc/openbis/13.04.0/ch/systemsx/cisd/openbis/generic/shared/api/v1/IGeneralInformationService.html'>IGeneralInformationService:getDataStoreBaseURLs</a></p></li>
</ul>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>  <span class='no'>tok</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='login.html'>login_openbis</a></span>()

  <span class='co'># data store server information</span>
  <span class='fu'>list_datastores</span>(<span class='no'>tok</span>)</div><div class='output co'>#&gt; █─DataStore 
#&gt; ├─code = DSS-SCREENING 
#&gt; ├─downloadUrl = https://infectx.biozentrum.unibas.ch/datastore_server 
#&gt; └─hostUrl = https://infectx.biozentrum.unibas.ch </div><div class='input'>
  <span class='co'># search for a cell profiler feature data set from plate KB2-03-1I</span>
  <span class='no'>search</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='search_openbis.html'>search_criteria</a></span>(
    <span class='fu'><a href='search_openbis.html'>attribute_clause</a></span>(<span class='st'>"type"</span>, <span class='st'>"HCS_ANALYSIS_CELL_FEATURES_CC_MAT"</span>),
    <span class='kw'>sub_criteria</span> <span class='kw'>=</span> <span class='fu'><a href='search_openbis.html'>search_sub_criteria</a></span>(
      <span class='fu'><a href='search_openbis.html'>search_criteria</a></span>(<span class='fu'><a href='search_openbis.html'>attribute_clause</a></span>(<span class='st'>"code"</span>,
                                       <span class='st'>"/INFECTX_PUBLISHED/KB2-03-1I"</span>)),
      <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"sample"</span>
    )
  )
  <span class='no'>ds</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='search_openbis.html'>search_openbis</a></span>(<span class='no'>tok</span>, <span class='no'>search</span>)

  <span class='co'># list all files of this data set</span>
  <span class='no'>files</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='list_fetch_files.html'>list_files</a></span>(<span class='no'>tok</span>, <span class='no'>ds</span>)
  <span class='co'># extract file paths</span>
  <span class='no'>file_paths</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='json_utils.html'>get_field</a></span>(<span class='no'>files</span>, <span class='st'>"pathInDataSet"</span>)
  <span class='co'># select a file</span>
  <span class='no'>file_path</span> <span class='kw'>&lt;-</span> <span class='no'>file_paths</span>[<span class='fu'>grepl</span>(<span class='st'>"Count_Cells"</span>, <span class='no'>file_paths</span>)]

  <span class='co'># generate url</span>
  <span class='fu'>list_download_urls</span>(<span class='no'>tok</span>, <span class='no'>ds</span>, <span class='no'>file_path</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; [1] "https://infectx.biozentrum.unibas.ch/datastore_server/stream-content?streamID=180604151029844-4C54F787595C67B57E2C0611025B4E3A"
#&gt; attr(,"data_set")
#&gt; [1] "20120629071528402-603231"
#&gt; attr(,"path")
#&gt; [1] "original/ibrain2_dataset_id_52954/Image.Count_Cells.mat"
#&gt; </div><div class='input'>
  <span class='co'># generate url and download file</span>
  <span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='list_fetch_files.html'>read_mat_files</a></span>(<span class='fu'>url</span>(<span class='fu'>list_download_urls</span>(<span class='no'>tok</span>, <span class='no'>ds</span>, <span class='no'>file_path</span>)<span class='kw'>[[</span><span class='fl'>1L</span>]]))
  <span class='fu'>attributes</span>(<span class='no'>dat</span>)</div><div class='output co'>#&gt; $object
#&gt; [1] "Image"
#&gt; 
#&gt; $feature
#&gt; [1] "Count_Cells"
#&gt; </div><div class='input'>  <span class='fu'>str</span>(<span class='fu'>as.integer</span>(<span class='no'>dat</span>))</div><div class='output co'>#&gt;  int [1:3456] 330 299 278 266 215 150 348 184 147 405 ...</div><div class='input'>
  <span class='co'># set timeout to 2 sec</span>
  <span class='no'>file_url</span> <span class='kw'>&lt;-</span> <span class='fu'>list_download_urls</span>(<span class='no'>tok</span>, <span class='no'>ds</span>, <span class='no'>file_path</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>2L</span>)
  <span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='list_fetch_files.html'>read_mat_files</a></span>(<span class='fu'>url</span>(<span class='no'>file_url</span><span class='kw'>[[</span><span class='fl'>1L</span>]]))

  <span class='co'># let timeout expire</span>
  <span class='no'>file_url</span> <span class='kw'>&lt;-</span> <span class='fu'>list_download_urls</span>(<span class='no'>tok</span>, <span class='no'>ds</span>, <span class='no'>file_path</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>2L</span>)
  <span class='fu'>Sys.sleep</span>(<span class='fl'>3L</span>)
  <span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='list_fetch_files.html'>read_mat_files</a></span>(<span class='fu'>url</span>(<span class='no'>file_url</span><span class='kw'>[[</span><span class='fl'>1L</span>]]))

  <span class='fu'><a href='login.html'>logout_openbis</a></span>(<span class='no'>tok</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#openbis">openBIS</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='mailto:nicolas.bennett@stat.math.ethz.ch'>Nicolas Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  docsearch({
    
    
    apiKey: '8f9990194a308dca43109e01826929af',
    indexName: 'infx',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>


  </body>
</html>

